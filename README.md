# Sample of cppRouting with SfNetworks

<script src="README_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="README_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="README_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="README_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="README_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="README_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="README_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="README_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="README_files/libs/leaflet-binding-2.2.0/leaflet.js"></script>
<script src="README_files/libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js"></script>
<script src="README_files/libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script>
<link href="README_files/libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="README_files/libs/HomeButton-0.0.1/home-button.js"></script>
<script src="README_files/libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="README_files/libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="README_files/libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="README_files/libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


Sample code to use sfnetworks with cppRouting

First load the functions.

``` r
library(wrapr)

#Transform the sfnetworks network, in cppRouting format
sfnet2cppRouting <- modules::use("sfnet2cppRouting.R")

shortest_path <- modules::use("shortest_path.R")
min_distance <- modules::use("min_distance.R")
```

Then load the network and get the cppRouting one too.

``` r
network <- "oldenburg_walking_network.geojson" %.>%
  #Read the file
  sf::st_read(., quiet = TRUE) %.>%
  #Only linestrings
  sf::st_cast(., "LINESTRING") %.>%
  #Set a column for the weight of the line as the distance
  dplyr::mutate(., weight = sf::st_length(.)) %.>%
  #Get the sfnetworks object
  sfnetworks::as_sfnetwork(., directed = FALSE)
```

    Warning in st_cast.sf(., "LINESTRING"): repeating attributes for all
    sub-geometries for which they may not be constant

``` r
weight <- "weight"

cppRouting_graph <- sfnet2cppRouting$sfnet2cppRouting(network, weight)
```

Set some random nodes to use:

``` r
from <- c(1, 2, 3)
to <- c(5, 6, 7)
```

## Shortest Path Matrix:

``` r
ret <- shortest_path$networks.shortest_path.node2node.cppRouting.matrix(network, cppRouting_graph, from, to)

print(ret)
```

    Simple feature collection with 9 features and 2 fields
    Geometry type: GEOMETRY
    Dimension:     XY
    Bounding box:  xmin: 8.208518 ymin: 53.13685 xmax: 8.219401 ymax: 53.14239
    Geodetic CRS:  WGS 84
      from to                           path
    1    1  5 MULTILINESTRING ((8.213525 ...
    2    1  6 MULTILINESTRING ((8.213525 ...
    3    1  7 LINESTRING (8.218106 53.140...
    4    2  5 MULTILINESTRING ((8.213525 ...
    5    2  6 MULTILINESTRING ((8.213525 ...
    6    2  7 MULTILINESTRING ((8.218106 ...
    7    3  5 LINESTRING (8.21851 53.1405...
    8    3  6 LINESTRING (8.2183 53.14049...
    9    3  7 LINESTRING (8.218106 53.140...

``` r
mapview::mapview(ret)
```

    The legacy packages maptools, rgdal, and rgeos, underpinning the sp package,
    which was just loaded, will retire in October 2023.
    Please refer to R-spatial evolution reports for details, especially
    https://r-spatial.org/r/2023/05/15/evolution4.html.
    It may be desirable to make the sf package available;
    package maintainers should consider adding sf to Suggests:.
    The sp package is now running under evolution status 2
         (status 2 uses the sf package in place of rgdal)

<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-02e1b5a70dba9cc4712d" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-02e1b5a70dba9cc4712d">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addPolylines","args":[[[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.208958400000002,8.2093326,8.210147699999998,8.2101009,8.2100264,8.210001399999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1411018,53.1410874,53.1411823,53.1413535,53.1415311,53.14159060000001,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.208958400000002,8.208854100000002,8.2087333],"lat":[53.1411018,53.1411745,53.1412135]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.208958400000002,8.2093326,8.210147699999998,8.2101009,8.2100264,8.210001399999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1411018,53.1410874,53.1411823,53.1413535,53.1415311,53.14159060000001,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.208958400000002,8.208854100000002,8.2087333],"lat":[53.1411018,53.1411745,53.1412135]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001,8.2183212,8.218300300000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006,53.1404912,53.1404902]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2181058,8.2181234,8.218129400000002,8.218132100000002,8.2181137,8.218082100000002,8.218086100000001,8.218102499999999,8.218083,8.218065599999999,8.218065600000001,8.218066200000001,8.218070399999998,8.2180631,8.2180602,8.2180559,8.2180369,8.2180309,8.218025300000001,8.2180251,8.2180313,8.218058999999998,8.218075799999999,8.2180812,8.218082600000001,8.218070700000002,8.218059800000001,8.218025000000001,8.218020000000001,8.217988200000001,8.2179243,8.2178384,8.217745900000001,8.217634200000001,8.2174476,8.2172444,8.2170538,8.2169224,8.216779600000002,8.216601399999998,8.216374200000001,8.2159473,8.215611399999998,8.2149939,8.2148051,8.2145507,8.214067999999997,8.213846899999998,8.213586999999999,8.2134331,8.213221000000001,8.212782600000001,8.212600999999999,8.212462199999999,8.212293299999999,8.212175500000003,8.2118363,8.211641800000001,8.2110287,8.210149100000002,8.209829600000003,8.2096201,8.209389900000001,8.209341200000001,8.208750800000001,8.2085788,8.208527800000001,8.208518099999999,8.2085372,8.208579700000001,8.208619000000001,8.208659899999999,8.2087333],"lat":[53.1400307,53.1399138,53.1398821,53.1398676,53.1397456,53.13929790000001,53.1392233,53.1391495,53.13908610000001,53.13903549999999,53.1390087,53.1389936,53.138907,53.1388355,53.138784,53.13873009999999,53.1384604,53.1383733,53.1382878,53.1382151,53.1381424,53.1380322,53.1379101,53.1378586,53.1377926,53.13770550000001,53.13764380000001,53.1374858,53.1374653,53.1373772,53.1372648,53.1371744,53.13710630000001,53.1370383,53.1369603,53.13689939999999,53.13687779999999,53.1368616,53.13684850000001,53.1368554,53.1368862,53.1369499,53.1370494,53.13723710000001,53.1372884,53.1373407,53.13746149999999,53.1375267,53.1376199,53.1376875,53.13778049999999,53.137957,53.1380305,53.1380903,53.1381737,53.1382417,53.1384373,53.1385705,53.13896830000001,53.1395353,53.1397428,53.13987670000001,53.1400227,53.1400542,53.1404277,53.1405762,53.1406708,53.1407742,53.14084829999999,53.1409417,53.1410195,53.1410961,53.1412135]}]],[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.209104399999998,8.209190599999999,8.209283299999999,8.2098134,8.210760199999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1417339,53.14169630000001,53.1416905,53.1418365,53.1421207,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.209104399999998,8.209190599999999,8.209283299999999,8.2098134,8.210760199999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1417339,53.14169630000001,53.1416905,53.1418365,53.1421207,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001,8.2183212,8.218300300000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006,53.1404912,53.1404902]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2181058,8.2181234,8.218129400000002],"lat":[53.1400307,53.1399138,53.1398821]}],[{"lng":[8.218129400000002,8.218132100000002,8.2181137,8.218082100000002,8.218086100000001,8.218102499999999,8.218202,8.218303300000001,8.2183697,8.2184665,8.2185475,8.2185978,8.2187077,8.218717600000002,8.218743099999999,8.218765100000001,8.2187833,8.2187885,8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398821,53.1398676,53.1397456,53.13929790000001,53.1392233,53.1391495,53.1391074,53.1390684,53.1390509,53.13903320000001,53.1390263,53.1390213,53.1390204,53.1391024,53.1392471,53.1393612,53.1394054,53.139444,53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821]}],[{"lng":[8.209104399999998,8.209190599999999,8.209283299999999,8.2098134,8.210760199999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1417339,53.14169630000001,53.1416905,53.1418365,53.1421207,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001,8.218947699999999],"lat":[53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601,53.1399917]}]],[[{"lng":[8.218510200000001,8.2183212,8.218300300000001,8.2179275,8.2178884,8.217840600000001,8.217696799999999,8.2175473,8.217477800000001,8.2174073],"lat":[53.1405006,53.1404912,53.1404902,53.1404688,53.1404668,53.1404639,53.140455,53.1404496,53.1404512,53.14045839999999]}]],[[{"lng":[8.218300300000001,8.2179275,8.2178884,8.217840600000001,8.217696799999999,8.2175473,8.217477800000001,8.2174073],"lat":[53.1404902,53.1404688,53.1404668,53.1404639,53.140455,53.1404496,53.1404512,53.14045839999999]}]],[[{"lng":[8.2181058,8.2181234,8.218129400000002,8.218132100000002,8.2181137,8.218082100000002,8.218086100000001,8.218102499999999,8.218202,8.218303300000001,8.2183697,8.2184665,8.2185475,8.2185978,8.2187077,8.218717600000002,8.218743099999999,8.218765100000001,8.2187833,8.2187885,8.218850000000002,8.2188564,8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001,8.2183212,8.218300300000001,8.2179275,8.2178884,8.217840600000001,8.217696799999999,8.2175473,8.217477800000001,8.2174073],"lat":[53.1400307,53.1399138,53.1398821,53.1398676,53.1397456,53.13929790000001,53.1392233,53.1391495,53.1391074,53.1390684,53.1390509,53.13903320000001,53.1390263,53.1390213,53.1390204,53.1391024,53.1392471,53.1393612,53.1394054,53.139444,53.1398819,53.1399203,53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006,53.1404912,53.1404902,53.1404688,53.1404668,53.1404639,53.140455,53.1404496,53.1404512,53.14045839999999]}]]],null,"ret",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"line","stroke":true,"color":"#6666FF","weight":2,"opacity":0.9,"fill":false,"fillColor":"#6666FF","fillOpacity":1,"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>4&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>5&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>6&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>7&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>8&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>9&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":1,"fill":false,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[8.208518099999999,53.13684850000001,8.2194007,53.1423898,true,"ret","Zoom to ret","<strong> ret <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"ret",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["ret"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"ret"}]}],"limits":{"lat":[53.13684850000001,53.1423898],"lng":[8.208518099999999,8.2194007]},"fitBounds":[53.13684850000001,8.208518099999999,53.1423898,8.2194007,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>

## Shortest Path Pairs

``` r
ret <- shortest_path$networks.shortest_path.node2node.cppRouting.pairs(network, cppRouting_graph, from, to)

print(ret)
```

    Simple feature collection with 3 features and 2 fields
    Geometry type: GEOMETRY
    Dimension:     XY
    Bounding box:  xmin: 8.208733 ymin: 53.13902 xmax: 8.219401 ymax: 53.14239
    Geodetic CRS:  WGS 84
      from to                           path
    1    1  5 MULTILINESTRING ((8.213525 ...
    2    2  6 MULTILINESTRING ((8.213525 ...
    3    3  7 LINESTRING (8.218106 53.140...

``` r
mapview::mapview(ret)
```

<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d6cfafe8f2161f83edeb" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d6cfafe8f2161f83edeb">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addPolylines","args":[[[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.208958400000002,8.2093326,8.210147699999998,8.2101009,8.2100264,8.210001399999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1411018,53.1410874,53.1411823,53.1413535,53.1415311,53.14159060000001,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.208958400000002,8.208854100000002,8.2087333],"lat":[53.1411018,53.1411745,53.1412135]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2135248,8.213640099999999,8.2136815,8.2145198,8.214608200000002,8.2145908,8.2146402,8.215074100000002,8.215207899999999,8.215415699999999,8.2154936,8.2156088,8.2156418,8.215766100000002,8.216028600000001,8.21625,8.2163827,8.2164786,8.216595700000001,8.216612899999999,8.2166795,8.216888800000001,8.2171535,8.217946900000001,8.217995500000001,8.2180698,8.218129400000002,8.2181897,8.2183142,8.218374500000001,8.2184645,8.218534399999999,8.218608199999998,8.218711600000001,8.218785699999998,8.218862900000001],"lat":[53.1421816,53.1421686,53.1421775,53.1423571,53.1423898,53.1423613,53.1422928,53.1418526,53.1417239,53.141524,53.1414503,53.141326,53.141289,53.1411619,53.1409048,53.140691,53.14055020000001,53.1404486,53.1403217,53.14030580000001,53.1402277,53.1401353,53.140082,53.13996130000001,53.13994000000001,53.1398848,53.1398821,53.13987939999999,53.1398645,53.1398577,53.1398527,53.13985660000001,53.1398699,53.1399034,53.13993129999999,53.1399601]}],[{"lng":[8.209104399999998,8.209190599999999,8.209283299999999,8.2098134,8.210760199999999,8.211029100000001,8.2112154,8.211415799999999,8.2116574,8.2117433],"lat":[53.1417339,53.14169630000001,53.1416905,53.1418365,53.1421207,53.1417344,53.14176880000001,53.1418059,53.1418505,53.14186810000001]}],[{"lng":[8.2135248,8.2133465,8.212585799999998,8.2125079,8.212456900000001,8.211791399999999,8.2117433],"lat":[53.1421816,53.1422145,53.142081,53.14202220000001,53.1419917,53.1418689,53.14186810000001]}],[{"lng":[8.218850000000002,8.218985999999999,8.218996600000001,8.218947699999999],"lat":[53.1398819,53.1399365,53.14002320000001,53.1399917]}],[{"lng":[8.218850000000002,8.2188564,8.218862900000001],"lat":[53.1398819,53.1399203,53.1399601]}],[{"lng":[8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001,8.2183212,8.218300300000001],"lat":[53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006,53.1404912,53.1404902]}],[{"lng":[8.218862900000001,8.218947699999999],"lat":[53.1399601,53.1399917]}]],[[{"lng":[8.2181058,8.2181234,8.218129400000002,8.218132100000002,8.2181137,8.218082100000002,8.218086100000001,8.218102499999999,8.218202,8.218303300000001,8.2183697,8.2184665,8.2185475,8.2185978,8.2187077,8.218717600000002,8.218743099999999,8.218765100000001,8.2187833,8.2187885,8.218850000000002,8.2188564,8.218862900000001,8.2188678,8.218897999999998,8.219003300000001,8.2190297,8.219053000000001,8.219106,8.2192144,8.2193033,8.2194007,8.2188993,8.218841299999999,8.2187854,8.218510200000001,8.2183212,8.218300300000001,8.2179275,8.2178884,8.217840600000001,8.217696799999999,8.2175473,8.217477800000001,8.2174073],"lat":[53.1400307,53.1399138,53.1398821,53.1398676,53.1397456,53.13929790000001,53.1392233,53.1391495,53.1391074,53.1390684,53.1390509,53.13903320000001,53.1390263,53.1390213,53.1390204,53.1391024,53.1392471,53.1393612,53.1394054,53.139444,53.1398819,53.1399203,53.1399601,53.1399946,53.1401444,53.1403012,53.14033869999999,53.14036229999999,53.1404062,53.1404843,53.14052999999999,53.1405628,53.1405256,53.1405208,53.14051729999999,53.1405006,53.1404912,53.1404902,53.1404688,53.1404668,53.1404639,53.140455,53.1404496,53.1404512,53.14045839999999]}]]],null,"ret",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"line","stroke":true,"color":"#6666FF","weight":2,"opacity":0.9,"fill":false,"fillColor":"#6666FF","fillOpacity":1,"smoothFactor":1,"noClip":false},["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>1&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>5&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>2&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>6&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>from&emsp;<\/th><td>3&emsp;<\/td><\/tr><tr><td>2<\/td><th>to&emsp;<\/th><td>7&emsp;<\/td><\/tr><tr><td>3<\/td><th>path&emsp;<\/th><td>sfc_MULTILINESTRING&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":3,"opacity":1,"fill":false,"fillOpacity":0,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[8.2087333,53.1390204,8.2194007,53.1423898,true,"ret","Zoom to ret","<strong> ret <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"ret",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["ret"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"ret"}]}],"limits":{"lat":[53.1390204,53.1423898],"lng":[8.2087333,8.2194007]},"fitBounds":[53.1390204,8.2087333,53.1423898,8.2194007,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>

## Min Distance Matrix

``` r
min_distance$networks.min_distance.node2node.cppRouting.matrix(network, cppRouting_graph, from, to)
```

      from to   distance
    1    1  1 1089.56645
    2    1  2 1103.61466
    3    1  3 1178.87029
    4    2  1 1041.89042
    5    2  2 1055.93863
    6    2  3 1132.26373
    7    3  1   73.89156
    8    3  2   59.84335
    9    3  3  460.52335

## Min Distance Paris

``` r
min_distance$networks.min_distance.node2node.cppRouting.pairs(network, cppRouting_graph, from, to)
```

      from to  distance
    1    1  5 1089.5664
    2    2  6 1055.9386
    3    3  7  460.5234

All returns are a dataframe with “from”, “to” columns with the nodes,
the last column depends if is distance or shortestpath.

- distance: Use the column distance
- shortestpath: Use the “path” column, is a geom column
